{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://omnia.altairalabs.ai/versions.schema.json",
  "title": "Omnia Documentation Versions",
  "description": "Schema for documentation version metadata",
  "type": "object",
  "required": ["versions"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Reference to this schema file"
    },
    "latest": {
      "type": ["string", "null"],
      "description": "The latest stable version (e.g., '1.2.3'). Null if no stable release exists.",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "latestPrerelease": {
      "type": ["string", "null"],
      "description": "The latest prerelease version (e.g., '1.3.0-beta.1'). Null if no prerelease exists.",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9]+(\\.[0-9]+)?)?$"
    },
    "versions": {
      "type": "array",
      "description": "List of all documentation versions, ordered newest first",
      "items": {
        "type": "object",
        "required": ["version", "fullVersion", "label", "path", "released", "status"],
        "properties": {
          "version": {
            "type": "string",
            "description": "Minor version identifier (e.g., '1.2')",
            "pattern": "^[0-9]+\\.[0-9]+$"
          },
          "fullVersion": {
            "type": "string",
            "description": "Full semantic version (e.g., '1.2.3' or '1.2.3-beta.1')",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+(-[a-zA-Z0-9]+(\\.[0-9]+)?)?$"
          },
          "label": {
            "type": "string",
            "description": "Display label for the version selector (e.g., 'v1.2 (Latest)')",
            "minLength": 1
          },
          "path": {
            "type": "string",
            "description": "URL path prefix for this version's documentation (e.g., '/v1.2/')",
            "pattern": "^/.*/$"
          },
          "released": {
            "type": "string",
            "description": "ISO 8601 date when this version was released",
            "format": "date-time"
          },
          "status": {
            "type": "string",
            "description": "Release status of this version",
            "enum": ["stable", "prerelease", "deprecated"]
          },
          "eol": {
            "type": ["string", "null"],
            "description": "ISO 8601 date when this version reaches end-of-life. Null if not deprecated.",
            "format": "date-time"
          },
          "helmChart": {
            "type": "string",
            "description": "OCI URI for the Helm chart (e.g., 'oci://ghcr.io/altairalabs/charts/omnia:1.2.3')"
          },
          "dockerImage": {
            "type": "string",
            "description": "Docker image reference (e.g., 'ghcr.io/altairalabs/omnia:1.2.3')"
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
