# Omnia Dashboard Environment Variables

# API endpoint for the Omnia operator
NEXT_PUBLIC_OPERATOR_API_URL=http://localhost:8082

# Demo mode - uses mock data instead of real API calls
NEXT_PUBLIC_DEMO_MODE=false

# Read-only mode - disables all mutating operations (scaling, deploying, etc.)
# Useful for GitOps environments where changes must go through Git
NEXT_PUBLIC_READ_ONLY_MODE=false

# Custom message shown when users attempt changes in read-only mode
# Default: "Dashboard is in read-only mode. Changes must be made through GitOps."
# NEXT_PUBLIC_READ_ONLY_MESSAGE="Please create a ServiceNow ticket to request changes."

# Grafana integration - enables embedded metrics panels
# Set this to your Grafana instance URL to enable live metrics visualization
# NEXT_PUBLIC_GRAFANA_URL=http://grafana:3000

# Grafana subpath on the remote server (default: /grafana/)
# Change this if your Grafana is served at a different path
# Examples: /grafana/, /monitoring/, / (for root)
# NEXT_PUBLIC_GRAFANA_PATH=/grafana/

# Grafana organization ID for multi-org setups (default: 1)
# NEXT_PUBLIC_GRAFANA_ORG_ID=1

# ============================================================================
# Authentication
# ============================================================================

# Authentication mode: "anonymous" (default), "proxy", "oauth", or "builtin"
# - anonymous: No authentication, all users are anonymous viewers
# - proxy: Header-based auth from reverse proxy (OAuth2 Proxy, Authelia, etc.)
# - oauth: Direct OAuth/OIDC integration with identity providers
# - builtin: Local user database with username/password authentication
OMNIA_AUTH_MODE=anonymous

# Base URL for OAuth callbacks (required for OAuth mode)
# OMNIA_BASE_URL=https://dashboard.example.com

# Proxy authentication headers (when OMNIA_AUTH_MODE=proxy)
# These headers are set by your reverse proxy after authenticating the user
# OMNIA_AUTH_PROXY_HEADER_USER=X-Forwarded-User
# OMNIA_AUTH_PROXY_HEADER_EMAIL=X-Forwarded-Email
# OMNIA_AUTH_PROXY_HEADER_GROUPS=X-Forwarded-Groups
# OMNIA_AUTH_PROXY_HEADER_DISPLAY_NAME=X-Forwarded-Preferred-Username

# Auto-create users on first login (default: true)
# OMNIA_AUTH_PROXY_AUTO_SIGNUP=true

# ============================================================================
# OAuth/OIDC Configuration (when OMNIA_AUTH_MODE=oauth)
# ============================================================================

# OAuth provider: generic, google, github, azure, okta
# - generic: Any OIDC-compliant provider (requires OMNIA_OAUTH_ISSUER_URL)
# - google: Google (accounts.google.com)
# - github: GitHub (OAuth 2.0 - not OIDC, special handling)
# - azure: Microsoft Azure AD / Entra ID
# - okta: Okta
# OMNIA_OAUTH_PROVIDER=generic

# OAuth client credentials
# OMNIA_OAUTH_CLIENT_ID=your-client-id
# OMNIA_OAUTH_CLIENT_SECRET=your-client-secret

# Alternative: Read client secret from file (for K8s Secret mounting)
# OMNIA_OAUTH_CLIENT_SECRET_FILE=/etc/omnia/oauth/client-secret

# OIDC Issuer URL (required for generic provider)
# OMNIA_OAUTH_ISSUER_URL=https://auth.example.com

# OAuth scopes (comma-separated, defaults vary by provider)
# OMNIA_OAUTH_SCOPES=openid,profile,email,groups

# Claim mapping - which OIDC claims map to user fields
# OMNIA_OAUTH_CLAIM_USERNAME=preferred_username
# OMNIA_OAUTH_CLAIM_EMAIL=email
# OMNIA_OAUTH_CLAIM_DISPLAY_NAME=name
# OMNIA_OAUTH_CLAIM_GROUPS=groups

# Provider-specific settings
# OMNIA_OAUTH_AZURE_TENANT_ID=your-tenant-id  # For Azure AD
# OMNIA_OAUTH_OKTA_DOMAIN=your-domain.okta.com  # For Okta

# Role mapping from groups (comma-separated group names)
# Users in these groups get the corresponding role
# OMNIA_AUTH_ROLE_ADMIN_GROUPS=omnia-admins,platform-admins
# OMNIA_AUTH_ROLE_EDITOR_GROUPS=omnia-editors,developers

# Default role for anonymous users (when OMNIA_AUTH_MODE=anonymous)
# OMNIA_AUTH_ANONYMOUS_ROLE=viewer

# Session configuration
# OMNIA_SESSION_SECRET=your-32-char-secret-here  # Required in production!
# OMNIA_SESSION_COOKIE_NAME=omnia_session
# OMNIA_SESSION_TTL=86400  # 24 hours in seconds

# ============================================================================
# Built-in Authentication (when OMNIA_AUTH_MODE=builtin)
# ============================================================================

# User store type: "sqlite" (default) or "postgresql"
# - sqlite: Local SQLite database (good for single-instance deployments)
# - postgresql: PostgreSQL database (good for multi-instance deployments)
# OMNIA_BUILTIN_STORE_TYPE=sqlite

# SQLite database path (when using sqlite store)
# OMNIA_BUILTIN_SQLITE_PATH=./data/omnia-users.db

# PostgreSQL connection URL (when using postgresql store)
# OMNIA_BUILTIN_POSTGRES_URL=postgresql://user:password@localhost:5432/omnia

# Allow new user signups (default: false)
# OMNIA_BUILTIN_ALLOW_SIGNUP=false

# Require email verification for new signups (default: false)
# OMNIA_BUILTIN_VERIFY_EMAIL=false

# Minimum password length (default: 8)
# OMNIA_BUILTIN_MIN_PASSWORD_LENGTH=8

# Maximum failed login attempts before lockout (default: 5)
# OMNIA_BUILTIN_MAX_FAILED_ATTEMPTS=5

# Account lockout duration in seconds (default: 900 = 15 minutes)
# OMNIA_BUILTIN_LOCKOUT_DURATION=900

# Password reset token expiration in seconds (default: 3600 = 1 hour)
# OMNIA_BUILTIN_RESET_TOKEN_EXPIRATION=3600

# Email verification token expiration in seconds (default: 86400 = 24 hours)
# OMNIA_BUILTIN_VERIFICATION_TOKEN_EXPIRATION=86400

# Initial admin user (created on first run if no users exist)
# OMNIA_BUILTIN_ADMIN_USERNAME=admin
# OMNIA_BUILTIN_ADMIN_EMAIL=admin@example.com
# OMNIA_BUILTIN_ADMIN_PASSWORD=changeme123

# ============================================================================
# API Keys
# ============================================================================

# Enable API key authentication for programmatic access
# API keys can be used via Authorization: Bearer omnia_sk_... or X-API-Key header
OMNIA_AUTH_API_KEYS_ENABLED=true

# Maximum number of API keys per user (default: 10)
# OMNIA_AUTH_API_KEYS_MAX_PER_USER=10

# Default expiration for new keys in days (default: 90, 0 = never expires)
# OMNIA_AUTH_API_KEYS_DEFAULT_EXPIRATION=90
